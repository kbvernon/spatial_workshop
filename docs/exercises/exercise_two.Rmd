---
title: "Exercise Two"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,
                      warning = FALSE,
                      message = FALSE,
                      error = TRUE,
                      collapse = TRUE, # code and output in same block
                      fig.align = "center",
                      fig.width = 500/72,
                      fig.retina = 2,
                      fig.asp = 0.7)
```

## Setup

Load `sf`, `raster`, `spData`, and `dplyr`.

```{r}

```


## Rasters

Create the dem from the lecture. Plot this, then get its extent.

```{r}

```

Create the grain raster from the lecture. Find its resolution.

```{r}

```

Plot a histogram of the dem.

```{r}

```

Create a barplot of the grain raster. Hint: use `barplot()`.

```{r}

```

Extract the values of the four corner cells in the dem.

```{r}

```

Find all the cells in the dem that have an elevation greater than 85 and extract them.

```{r}

```


Find all the cells in the grain raster that are sand and extract them.

```{r}

```

Stack these rasters and rename each layer.

```{r}

```

Create a raster mask of the bottom left corner of the dem. Use it to mask the dem and the grain rasters. Try doing this to each separately, then to the raster stack. Plot the results.

```{r}

```





## Vectors

Show the layers in `project.gpkg`, then load in the US states and world simple features.

```{r}

```

Select columns from the us_states object which contain population data. Obtain the same result using a different command (bonus: try to find three ways of obtaining the same result).

```{r}

```

Find all states with the following characteristics (bonus find and plot them):
  * Belong to the Midwest region.  
  * Belong to the West region, have an area below 250,000 km2 and in 2015 a population greater than 5,000,000 residents (hint: you may need to use the function units::set_units() or as.numeric()).  
  * Belong to the South region, had an area larger than 150,000 km2 or a total population in 2015 larger than 7,000,000 residents.  

```{r}

```

What was the total population in 2015 in the us_states dataset? What was the minimum and maximum total population in 2015?

```{r}

```

How many states are there in each region?

```{r}

```

What was the minimum and maximum total population in 2015 in each region? What was the total population in 2015 in each region?

```{r}

```

Load the `us_states_df` dataset from `spData`.

```{r}

```

Add variables from `us_states_df` to `us_states`, and create a new object called `us_states_stats`. Hint: use `left_join()`. Plot the new object, selecting one attribute.

```{r}

```

`us_states_df` has two more rows than `us_states`. How can you find them? (hint: try to use the `dplyr::anti_join()` function)

```{r}

```

What was the population density in 2015 in each state? What was the population density in 2010 in each state?

```{r}

```

How much has population density changed between 2010 and 2015 in each state? Calculate the change in percentages and map them.

```{r}

```

Change the columns’ names in us_states to lowercase. (Hint: `dplyr::rename_with()` and `tolower()` may help.)

```{r}

```

What was the minimum, average and maximum state’s number of people living below the poverty line in 2015 for each region?

```{r}

```

